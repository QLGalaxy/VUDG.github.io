<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VUDG: <b>V</b>ideo <b>U</b>nderstanding <b>D</b>ataset <b>G</b>eneration</title>
  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <!-- SheetJS 库 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.4/xlsx.full.min.js"></script>
  <style>
    .qa-container {
      max-height: 200px;
      overflow-y: auto;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      background-color: #f9f9f9;
      margin-top: 10px;
    }
    .qa-item {
      margin-bottom: 15px;
    }
    .qa-item p {
      margin: 5px 0;
    }
    .qa-item p.question {
      font-weight: bold;
      color: #3273dc;
    }
    .qa-item p.answer {
      color: #363636;
    }
    .video-qa-pair {
      margin-bottom: 20px;
    }
    .benchmark-table {
      margin-top: 20px;
    }
    .benchmark-table table {
      width: 100%;
      border-collapse: collapse;
    }
    .benchmark-table th, .benchmark-table td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    .benchmark-table th {
      background-color: #f5f5f5;
      font-weight: bold;
    }
    .benchmark-table tr:nth-child(even) {
      background-color: #f9f9f9;
    }
  </style>
</head>
<body>

<!-- 主标题和作者信息 -->
<section class="section">
  <div class="container">
    <h1 class="title is-1 has-text-centered">VUDG: <b>V</b>ideo <b>U</b>nderstanding <b>D</b>ataset <b>G</b>eneration</h1>
    <div class="content has-text-centered">
      <p class="is-size-5 publication-authors">
        <span class="author-block">
          AAA<sup>1</sup>,
        </span>
        <span class="author-block">
          BBB<sup>2</sup>,
        </span>
        <span class="author-block">
          CCC<sup>1</sup>
        </span>
      </p>
      <p class="is-size-5 publication-authors">
        <span class="author-block"><sup>1</sup>XXX,</span>
        <span class="author-block"><sup>2</sup>YYY</span>
      </p>
    </div>

    <!-- Arxiv 链接 -->
    <div class="column has-text-centered">
      <div class="publication-links">
        <span class="link-block">
          <a href="https://arxiv.org/pdf/XXXX.XXXXX"
             class="external-link button is-normal is-rounded is-dark">
            <span class="icon">
              <i class="fas fa-file-pdf"></i>
            </span>
            <span>Paper</span>
          </a>
        </span>
        <span class="link-block">
          <a href="https://arxiv.org/abs/XXXX.XXXXX"
             class="external-link button is-normal is-rounded is-dark">
            <span class="icon">
              <i class="ai ai-arxiv"></i>
            </span>
            <span>arXiv</span>
          </a>
        </span>
      </div>
    </div>
  </div>
</section>

<!-- 标题 1: 数据集简介 -->
<section class="section">
  <div class="container">
    <h2 class="title is-2">Dataset Introduction</h2>
    <div class="content">
      <p>
        We present the <b>VUDG</b> dataset, a large-scale video understanding dataset designed for training and evaluating state-of-the-art video analysis models. 
        The dataset consists of <b>10,000+</b> high-quality video clips annotated with rich metadata, including object bounding boxes, action labels, and temporal segmentation.
      </p>
    </div>
  </div>
</section>

<!-- 标题 2: 数据集示例 -->
<section class="section">
  <div class="container">
    <h2 class="title is-2">Dataset Examples</h2>
    <div class="content">
      <p>
        Select a category from the dropdown menu and click "Preview" to view the corresponding videos and QA pairs.
      </p>

      <!-- 选项栏和预览按钮 -->
      <div class="field has-addons">
        <div class="control">
          <div class="select">
            <select id="category-select">
              <option value="cartoon">Cartoon</option>
              <option value="egocentric_video">Egocentric Video</option>
              <option value="foggy">Foggy</option>
              <option value="game">Game</option>
              <option value="movie_tv_show">Movie/TV Show</option>
              <option value="night">Night</option>
              <option value="rainy">Rainy</option>
              <option value="shakey">Shakey</option>
              <option value="snowy">Snowy</option>
              <option value="surveillance">Surveillance</option>
              <option value="virtual">Virtual</option>
            </select>
          </div>
        </div>
        <div class="control">
          <button id="preview-button" class="button is-primary">Preview</button>
        </div>
      </div>

      <!-- 2x2 网格布局 -->
      <div class="columns is-multiline" id="video-qa-grid" style="margin-top: 20px;">
        <!-- 视频 1 和 QA 1 -->
        <div class="column is-half video-qa-pair">
          <video id="video-1" controls width="100%">
            Your browser does not support the video tag.
          </video>
          <div class="qa-container" id="qa-1"></div>
        </div>

        <!-- 视频 2 和 QA 2 -->
        <div class="column is-half video-qa-pair">
          <video id="video-2" controls width="100%">
            Your browser does not support the video tag.
          </video>
          <div class="qa-container" id="qa-2"></div>
        </div>

        <!-- 视频 3 和 QA 3 -->
        <div class="column is-half video-qa-pair">
          <video id="video-3" controls width="100%">
            Your browser does not support the video tag.
          </video>
          <div class="qa-container" id="qa-3"></div>
        </div>

        <!-- 视频 4 和 QA 4 -->
        <div class="column is-half video-qa-pair">
          <video id="video-4" controls width="100%">
            Your browser does not support the video tag.
          </video>
          <div class="qa-container" id="qa-4"></div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- 标题 3: Benchmark 测试结果 -->
<section class="section">
  <div class="container">
    <h1 class="title is-2">Benchmark Test Results</h1>
    <div class="content">
      <p>
        Below are the benchmark test results from the <code>bench_score.xlsx</code> file.
      </p>

      <!-- Benchmark 表格 -->
      <div class="benchmark-table" id="benchmark-table">
        <!-- 表格内容将动态加载到这里 -->
      </div>
    </div>
  </div>
</section>

<!-- BibTeX 引用 -->
<section class="section">
  <div class="container is-max-desktop content">
    <h2 class="title">Citation</h2>
    <pre><code>@misc{li2024videovista,
      title={VideoVista: A Versatile Benchmark for Video Understanding and Reasoning}, 
      author={Yunxin Li and Xinyu Chen and Baotian Hu and Longyue Wang and Haoyuan Shi and Min Zhang},
      year={2024},
      eprint={2406.11303},
      archivePrefix={arXiv}
    }</code></pre>
  </div>
</section>

<!-- JavaScript 实现交互 -->
<script>
  // 加载视频和 QA 对
  document.getElementById('preview-button').addEventListener('click', async function () {
    const selectedCategory = document.getElementById('category-select').value;
    console.log('Selected Category:', selectedCategory); // 调试信息

    // 加载视频和 QA 对
    for (let i = 1; i <= 4; i++) {
      const videoPath = `./static/videos/${selectedCategory}_${i}.mp4?${Math.random()}`; // 避免缓存
      console.log(`Video ${i} Path:`, videoPath); // 调试信息

      const videoElement = document.getElementById(`video-${i}`);
      videoElement.innerHTML = `<source src="${videoPath}" type="video/mp4">`;
      videoElement.load();

      // 加载 QA 对
      const qaContainer = document.getElementById(`qa-${i}`);
      qaContainer.innerHTML = ''; // 清空之前的内容

      const qaPath = `./static/QAs/${selectedCategory}_${i}.txt`;
      console.log(`QA ${i} Path:`, qaPath); // 调试信息

      try {
        const response = await fetch(qaPath);
        if (!response.ok) throw new Error('File not found');
        const text = await response.text();
        const qaPairs = text.split('\n').filter(line => line.trim() !== ''); // 按行分割并过滤空行

        // 解析并添加 QA 对
        for (let j = 0; j < qaPairs.length; j += 2) {
          const question = qaPairs[j].replace('Q:', '').trim();
          const answer = qaPairs[j + 1].replace('A:', '').trim();
          qaContainer.innerHTML += `
            <div class="qa-item">
              <p class="question">Q: ${question}</p>
              <p class="answer">A: ${answer}</p>
            </div>
          `;
        }
      } catch (error) {
        console.error(`Failed to load QA for Video ${i}:`, error);
        qaContainer.innerHTML = `<p class="has-text-danger">Failed to load QA for Video ${i}.</p>`;
      }
    }
  });

  // 加载 Benchmark 测试结果
  async function loadBenchmarkResults() {
    const benchmarkTable = document.getElementById('benchmark-table');
    const filePath = './static/bench_score.xlsx';

    try {
      const response = await fetch(filePath);
      if (!response.ok) throw new Error('File not found');
      const arrayBuffer = await response.arrayBuffer();
      const workbook = XLSX.read(arrayBuffer, { type: 'array' });
      const firstSheetName = workbook.SheetNames[0];
      const worksheet = workbook.Sheets[firstSheetName];
      const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 });

      // 生成表格
      let tableHtml = '<table>';
      jsonData.forEach((row, rowIndex) => {
        tableHtml += '<tr>';
        row.forEach((cell, cellIndex) => {
          if (rowIndex === 0) {
            tableHtml += `<th>${cell}</th>`; // 表头
          } else {
            tableHtml += `<td>${cell}</td>`; // 表格内容
          }
        });
        tableHtml += '</tr>';
      });
      tableHtml += '</table>';

      benchmarkTable.innerHTML = tableHtml;
    } catch (error) {
      console.error('Failed to load benchmark results:', error);
      benchmarkTable.innerHTML = `<p class="has-text-danger">Failed to load benchmark results.</p>`;
    }
  }

  // 页面加载时加载 Benchmark 测试结果
  window.addEventListener('load', loadBenchmarkResults);
</script>

</body>
</html>
